(function(t,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(t=typeof globalThis!="undefined"?globalThis:t||self,i(t.waitwait={}))})(this,function(t){"use strict";function i(n){return setTimeout(function(){n._n!==0&&(n._wt=i(n))},1e4)}function s(n){return new Promise(e=>setTimeout(e,n))}class o{constructor(e=0){this._n=e,this._wt=null}add(e=1){if(this._n+=Number(e),this._n<0)throw new Error("Negative WaitGroup counter");this._n===0&&this.cancel()}done(){this.add(-1)}cancel(){this._resolve&&(this._resolve(),this._resolve=null),this._wt!==null&&(clearTimeout(this._wt),this._wt=null)}wait(){return this._p||(this._p=new Promise(e=>{if(this._resolve=e,this._n===0)return this.cancel();this._wt=i(this)})),this._p}}t.WaitGroup=o,t.sleep=s,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module"});
